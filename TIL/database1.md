# 데이터베이스 1

## 데이터베이스?

: 데이터 베이스 서버는 대량의 정보를 조직된 형태로 저장하는 프로그램이다. php같은 프로그래밍 언어를 사용하면 데이터베이스의 정보에 쉽게 접근할 수 있다.

* 데이터 베이스는 하나 이상의 테이블로 구성되며, 각 테이블은 데이터를 저장한다. 테이블은 하나 이상의 column을 지니며 각 column은 테이블에 저장될 데이터의 일부분을 담는다.
* 칼럼은 필드로 불리기도 한다. 
* 테이블은 각 칼럼의 데이터를 묶어 row 또는 entry 형태로 저장한다.
* 데이터베이스 테이블은 각 로우를 고유하게 식별하는 기준을 지녀야 한다. (id값) 따라서 다른 칼럼의 data가 중복이 되어도 id값을 이용하여 식별이 가능하게 된다.

## 워크벤치?

: 데이터베이스는 클라이언트 프로그램의 요청에 응답해야한다. 웹 서버가 웹 브라우저 같은 클라이언트의 요청에 응답하듯..

이러한 데이터베이스 클라이언트 프로그램이 워크벤치. ->mySQL 워크벤치 사용.

-  데이터 베이스 접속: 데이터를 저장하는 첫번째 단계, mysql 워크벤치를 이용해서 mysql서버에 접속. 데이터베이스 서버에 접속하려면 세가지 정보를 알아야 한다. ( 서버주소, 사용자명, 비밀번호 )
- 데이터 베이스 접속을 구성하는 정보들을 묶어 커넥션이라 부른다. 
- 프로그램 안에서 데이터베이스 접속을 담당하는 자원 또는 객체를 커넥션이라 부르기도 한다. 

## 스키마(schema)

: 데이터베이스를 지칭하는 또 다른 표현. mySQL은 데이터베이스 서버이다. 하나의 웹서버로 여러 웹 사이트를 구동할 수 있듯, 데이터 베이스 서버도 여러개의 데이터 베이스를 구동할 수 있다.

* 데이터 베이스 생성: 데이터베이스에 정보를 저장하려면 먼저 데이터베이스를 만들어야 한다. 

## 구조화된 쿼리 언어(SQL)

: create schema 명령처럼 mysql에 직접 전달하고 실행하는 명령구문, sql이라는 약어로 통칭 

mySQL 명령어는 대부분 대소문자를 구별하지 않는다. 그러나 데이터베이스명과 테이블명은 운영체제에 따라 대소문자를 구별한다. (리눅스나 맥os) 또한 테이블명과 칼럼명 등을 쿼리에 한 번 이상 사용할 때, 처음 사용했던 이름에서 대소문자를 바꾸지 않고 그대로 써야한다. **일관성을 지키기 위해 데이터 베이스 명령어는 모두 대문자로, 데이터베이스, 테이블, 칼럼명 등의 엔티티는 모두 소문자로 표기하자.**(가독성을 위해)

## 테이블

테이블은 데이터의 구조를 묘사한다. 테이블을 만들려면 저장하려는 데이터의 구조를 정확히 파악해야 한다. 테이블내의 각각의 정보는 테이블의 필드에 해당한다. 필드에 저장될 값의 형태에 따라 필드 타입을 지정해야 하는데, 타입에는 숫자, 텍스트, 날짜 등이 있다.

* 숫자: 수치 값을 저장한다.
* 텍스트: 문자열 값을 저장한다.
* 날짜/시간: 타임스탬프 값을 저장한다.

테이블 생성시 테이블 칼럼 정보에서 체크박스들->

* PK: Primary Key의 약자로 기본 키를 의미한다. PK로 설정된 칼럼은 테이블 엔트리의 고유한 식별자로 인식된다. 모든 ID는 고유한 엔트리 식별자로 인식되며 동일한 값을 공유할 수 없다.

* NN: Not Null의 약자다. NN으로 설정된 칼럼은 반드시 값이 존재해야 한다. id칼럼에 NN을 설정하면 id를 빈 값으로 둘 수 없다.

* AI: Auto Increment의 약자로 자동 증가를 의미한다. id필드를 AI로 설정하면 레코드를 추가할 때 값을 직접 입력하지 않아도 자동으로 입력되며 매번 자동으로 값을 증가시킨다.

* ![image](https://user-images.githubusercontent.com/51959017/100088170-1443f400-2e93-11eb-895e-0c2144d550cd.png)

  ```mysql
  CREATE TABLE `ijdb`.`joke` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `joketext` TEXT NULL,
    `jokedate` DATE NULL,
    PRIMARY KEY (`id`));
  ```

  mysql workbench에서 설정한 테이블 칼럼 정보와 그에 해당하는 쿼리문.(워크벤치에서 쿼리를 직접 실행하려면 쿼리 패널을 열어야 한다. )

## 데이터타입

* INT: 정수(integer)를 의미한다.
* TEXT: 텍스트 타입
* DATE: 날짜 타입

## 쿼리패널

:문자열을 입력하는 공간이다, 데이터베이스 서버에 질의를 보내고 작업을 수행할 명령어를 작성할 수 있다.



## 1) 데이터 추가 

1) 데이터베이스에 데이터 추가하는 방법1

```mysql
INSERT INTO 테이블명 SET
칼럼명1 = 칼럼값1,
칼럼명2 = 칼럼값2,
...;
```

2)

```mysql
INSERT INTO 테이블명
(칼럼명1, 칼럼명2, ...)
VALUES (칼럼값1, 칼럼값2, ...);
```



## 2) 데이터 불러오기 

```mysql
SELECT * FROM `ijdb`.`joke`; 
```

실행 결과를 표시하는 명령어(실행하면 결과 로우가 출력됨)

joke라는 테이블에서 테이블의 내용을 가져오는 쿼리문 *문자는 모든 칼럼을 의미한다. 특별한 조건이 없으면 SELECT 쿼리는 테이블의 모든 레코드를 반환한다.

```mysql
SELECT * FROM joke;
```

INSERT쿼리를 실행할 때, id 값을 지정하지 않았지만 테이블 데이터를 조회하면 id칼럼에 값이 있다는 걸 알수 있음. 테이블 생성시에 id 칼럼에 AI 조건을 지정하면 MySQL이 자동으로 값을 부여하고 증가시킨다.

```mysql
SELECT id, jokedate FROM joke
# SELECT에서 id와 jokedate 칼럼을 가져오는 쿼리
```

joketext의 내용 전체에서 일부만 보려면? SELECT 명령은 칼럼을 지정해서 가져올 수 있을 뿐만 아니라 각 칼럼에 함수를 적용해서 값을 변형 시킬 수 있다. 

```mysql
SELECT id, LEFT(joketext, 20), jokedate FROM joke;
# id, joketext를 앞에서 20글자만 가져오기, jokedate 
# LEFT는 mysql에 내장된 함수이다.
```

```mysql
SELECT COUNT(id) FROM joke;
# 반환 결과의 개수를 세는 count()함수. 해당되는 row의 개수를 센다.
```

```mysql
# SELECT 명령은 테이블의 전체 엔트리를 가져온다. 특정 속성을 지닌 엔트리만 제한적으로 가져오려면 where절을 사용
SELECT COUNT(*)
FROM joke
WHERE jokedate >= "2017-01-01";
# 2017년 1월 1일 당일부터 등록된 유머글의 개수를 구함. 
```

```mysql
# 텍스트에 특정 단어가 포함되는지 검사하는 조건
SELECT joketext
FROM joke
WHERE joketext LIKE "%프로그래머%";

# %문자는 와일드카드라고 불리며, 단어 앞이나 뒤에 나오는 모드 텍스트를 의미한다.
# LIKE 뒤에 나오는 표현식은 대소문자를 구별하지 않는다.
```

## 3) 데이터 수정

: 오탈자를 고치거나 날짜를 변경하는 등의 갱신 작업은 UPDATE 명령이 담당. SELECT나 INSERT 명령처럼 칼럼명과 그에 상응하는 값을 포함한다.

```mysql
# 일반적인 UPDATE 명령 형식
UPDATE 테이블명 SET
	칼럼명 = 값, ...
WHERE 조건
```

```mysql
# 유머글의 등록일자 변경 쿼리문
UPDATE joke SET
	jokedate = "2018-04-01" WHERE id = 1;
```

```mysql
UPDATE joke SET
	jokedate = "2018-03-13" WHERE joketext LIKE "%프로그래머%"
```



## 4) 데이터 삭제

```mysql
DELETE FROM 테이블명 WHERE 조건
```

```mysql
DELETE FROM joke WHERE joketext LIKE "%프로그래머%"
# 프로그래머가 포함된 유머글 모두 삭제
```

