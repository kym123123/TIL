# SEO

사람들이 내 콘텐츠를 보게 만들도록 하기 위해서, 검색에 최적화된 콘텐츠를 만들어야 한다. 이를 검색엔진 최적화(SEO)라고 한다. SEO는 B to C 비즈니스기업 페이지에 매우 중요하다. 

정적으로 빌드된 웹페이지는 html에 이미 페이지에 표시될 여러 데이터들이 마크업 태그와 나타나기 때문에 검색엔진 봇에 의해서 색인화 되는데 문제가 없다.

그러나 js를 이용하여 data를 새로 가져오기도 하고, 삭제하기도 하고 사용자와의 인터렉션에 의해서 페이지의 내용이 바뀌게 되는 동적 웹페이지들은 문제가 있다. 사용자와 인터렉션 하지 않은 기본값이 비어있는 동적 웹 페이지라면 검색엔진 봇이 데이터가 없다고 판단하고 색인화 하는데 문제가 발생한다.

## SEO에 중요한 이론

1. 검색엔진: 키워드 또는 지정된 다른 용어를 사용해서 인터넷에서 사용할 수 있는 data를 검색하는 프로그램이다.
2. head 태그: 문서의 상단에 위치, 문서에 대한 설명을 포함한다. 이 부분의 내용은 브라우저를 통해 나타나지 않는다. 
3. title 태그: 사용자, 검색엔진에 특정 페이지의 주제를 알려주는 역할이다. 각 페이지마다 고유한 제목이 필요하고, title 태그의 내용은 검색 결과에 반영되며 결과의 첫번째 행으로 나타난다.
   * title 태그의 권장사항: 1) page의 콘텐츠를 명확히 나타내는 제목으로 작성한다. 2) 페이지마다 고유한 title 태그를 작성해준다. (사이트 내의 다른 페이지를 구별하는데 도움을 준다.)
4. meta 태그(description): 검색엔진에서 페이지 정보의 요약 내용을 볼수 있다. 1 ~ 2 문장 또는 짧은 달락을 사용 할 수 있다. 검색엔진이 제공해준 검색 결과에서 내용 미리보기로 사용이 가능하다. (사용자가 검색한 내용과 잘 일치되는 경우 description tag가 미리보기로 사용이 된다.) 각 page마다 추가해주는 것이 좋다.

### page url 구조 개선하기

* 이해하기 쉬운 url은 contents내용을 전달하기에 좋다.
* 문서의 category와 파일 이름을 알아보기 쉽게 만들면 사이트를 더 잘 정리 할 수 있고, 검색엔진이 크롤링 하기에 쉬워진다.
* url에 콘텐츠와 연관된 단어가 있다면, 사용자와 검색엔진에 페이지에 대한 더 자세한 정보를 제공할 수 있게 된다.
* url 구조를 가능한 단순하게 만들면 방문자와 검색엔진 모두에 도움이 된다.
* url의 단어 사이를 '-'으로 연결하는 것이 '_'로 연결하는 것 보다 도움이 된다.
* 불필요한 매개변수나 sessionId값이 있는 긴 url은 지양한다.
* page.html같은 일반적인 이름(페이지의 특성을 나타내지 못하는)은 지양한다.
* 같은 키워드가 과도하게 반복되는 url은 사용하지 않는다.
* 사용자가 사이트에서 현재 위치를 알기 쉽도록 명확한 directory구조를 설계한다.
* 깊이 중첩된 하위 디렉토리 또는 내용과 전혀 관련없는 이상한 directory를 사용하지 않는다.

### root page

* 모든 웹 페이지에는 홈페이지(or 첫 페이지 = root page)가 있다.
* 사이트에서 가장 자주 방문하는 페이지이며, 주로 사이트를 탐색 시작하는 위치이다.
* 방문자가 첫 page에서 더 구체적인 콘텐츠가 있는 page로 이동하기 쉽도록 구성해야 한다.
* 사용자가 url의 일부를 제거하면서 상위 page로 이동하는 시도를 할 수 있다. 이 경우 사용자가 생각했던 것에 대응되는 page경로가 없는 경우가 많은데, 그 page의 상위 directory로 이동시키거나, 404 page를 보여준다. 빈 page를 보여주지 않도록 한다.

### 앵커 텍스트 이용하기

* 페이지 간 이동을 위해서 a 태그를 사용한다.
* a 태그 내에 text를 넣으면 앵커 텍스트가 된다. 앵커 텍스트 사용시 페이지간에 연결된 내용을 더 쉽게 전달 가능하다.
* 사용자와 검색엔진에게 링크된 페이지에 대한 정보를 제공한다.

### 이미지 사용 최적화

* alt 속성을 이용하여 이미지에 관련된 정보를 제공한다.
* 이미지를 a태그 내에 넣어 링크로 사용시, 해당 이미지의 alt값은 앵커텍스트의 텍스트 링크와 유사하게 처리된다.
* 너무 많은 이미지를 a태그 내에 넣어 사용하지 않도록 한다.
* image의 이름자체도 seo에 중요하다. 따라서 image1.jpg같은 일반적인 이름은 사용하지 않는것이 좋다.
* alt에 너무 많은 키워드를 넣거나 긴 문장을 넣지 않도록 한다.

### 헤딩 태그를 활용하여 중요부분 강조

* 헤딩태그는 신중하게 사용한다. 꼭 필요한 경우에 알맞게 사용한다.
* 한 페이지에 헤딩 태그가 너무 많으면 사용자와 크롤러가 contents를 파악하는데 제약이 생긴다.
* strong 태그와 같은 시각적인 강조만이 필요한 곳에 헤딩태그를 사용하지 않는다.



## csr에서의 검색엔진 최적화

ssr은 여러 경로에 대해서 클라이언트의 요청이 들어오면, 그에 맞는 html파일을 빌드하여 응답으로 보내준다. 따라서 서버에서 페이지에 해당하는 html을 확인이 가능하다. 크롤러가 이 html파일에 접근하여 페이지를 크롤링하여 색인화 할 수 있다.

반면 csr은 root경로에 대한 요청에 대응되는 단 하나의 index.html(그마저도 비어있는)만이 서버에 존재한다. '/'경로에 대한 요청에 이 index.html을 내려주게 되고, js에 의해서 ui가 렌더링 된다. 다른 경로에 대한 요청이 발생하면 csr로 만들어진 spa는 json파일을 내려주게 되고, js가 이를 토대로 새로운 페이지ui를 구성해준다. 그러나 app전체에서 index.html 하나만 존재하며 비어있기 때문에 크롤러가 접근해도 크롤링 할 것이 없고 비어있는 웹으로 간주한다. 색인화가 되지 않아서 심각한 seo문제가 생긴다. -> 모든 page는 단 하나의 html파일 정보를 보고 있기 때문에 검색 또는 sns의 공유 기능이 불가능. 또한 meta태그 사용에 약점이 있다.

### ssr을 하지 않으면서 ssr의 장점을 최대한 이용하기

:react-helmet과 react-snap을 이용해보자.

* react-helmet: index.html이 하나만 존재하기 때문에 head태그 내의 title, description등의 meta태그를 경로마다 설정해주지 못하는 csr의 단점을  일부 해결해준다. 동적으로 head태그 내의 내용을 변경 가능하게 해준다. 그러나 react-helmet을 적용해도 빌드된 index.html 파일에는 동적으로 적용되는 태그가 head내에 적용되어 있지 않다. 따라서 크롤러가 확인이 불가능하다. js를 client에서 실행 하고 나서 적용되기 때문이다.
* react-snap: js가 실행된 이후에 클라이언트에서만 head태그의 변경이 일어나는것의 단점을 해결해준다.
* react-snap은 빌드시에 route마다 각각의 index.html을 빌드해준다. 따라서 서버내에 다른 index.html과 각각의 메타태그들이 존재하기 때문에 크롤러가 확인하기에 용이하다. react-snap과 react-helmet을 이용하면 어느정도 seo의 문제점이 해결 가능하다. 그러나 정적 라우팅 말고, 동적라우팅(유저 정보, 게시글이 url에 포함되어 있는 경우)은 이 방법으로 해결이 불가능하다. 해당 유저또는 게시글 정보를 알 수 없기 때문이다. react-snap은 내부적으로 브라우저를 제어해서 해당하는 페이지를 로드시키고 그 page를 크롤링해서 index.html을 생성하는 것이기 때문에 서버에서 오지 않은 정보를 사전에 크롤링 할 수없다.

### 동적 라우팅의 seo 해결법

url의 params에 대한 데이터들을 위해서 별도의 api또는 라이브러리가 필요하다. 

* Prerender-SPA-plugin: (prerendering: app의 route들을 읽어서 static html file로 저장시켜준다.)
* ssr의 장점을 대부분 이용 가능 하다.
* Dynamic content는 placeholder component를 만들어서 동적 컨텐츠가 로드될 때 까지 대신 표시 될 수 있도록 해둔다.
* config파일에서 index.html에 생성할 page에 해당하는 data를 routes설정에 넣어준다.
* 빌드 시점에 shell script를 실행시킨다. 이 shell script가 api를 호출하고, 동적 페이지에 대한 data를 가져온다(json)
* 이 json파일을 기반으로 index.html을 생성한다. 

그러나 이 방법또한 동적 페이지가 너무 많으면, 새로 html파일을 많이 만들어 줘야하고, 현실적인 문제점이 있다.

따라서 너무많은 동적 page가 요구되거나 seo최적화 서비스가 더 필요하면 ssr을 사용한다.



